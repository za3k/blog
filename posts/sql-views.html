---
author: admin
categories:
- Technical
date: 2015-08-04 20:12:09-07:00
markup: html
source: wordpress
tags:
- cgi
- sql
- sqlite
- website
title: SQL views
updated: 2015-10-17 19:28:02-07:00
wordpress_id: 243
wordpress_slug: sql-views
---
<!-- blogpost -->
<article class="post-243 post type-post status-publish format-standard hentry category-technical tag-cgi tag-sql tag-sqlite tag-website" id="post-243">
<h1 class="entry-title">SQL views</h1>
<div class="entry-meta">
<span class="author vcard"> By  <a class="url fn n" href="https://blog.za3k.com/author/admin/" rel="author" title="View all posts by admin">admin</a> <span class="bl_sep">|</span></span> <time class="onDate date published" datetime="2015-08-04T20:12:09-07:00"> <a href="https://blog.za3k.com/sql-views/" rel="bookmark" title="8:12 pm"><span class="entry-date">August 4, 2015</span> <span class="entry-time"> - 8:12 pm</span></a> </time><span class="bl_sep">|</span><time class="updated" datetime="2015-10-17T19:28:02-07:00">October 17, 2015</time> <span class="bl_categ"> <a href="https://blog.za3k.com/category/technical/" rel="tag">Technical</a> </span> </div><!-- .entry-meta -->
<div class="entry-content">
<p>I decided I wanted to show (restricted) data views on the web in table form. Specifically, ‘stylish.db’ is a database provided by a chrome plugin. Here’s an example script, <a href="https://za3k.com/stylish.view">stylish.view</a>, which displays the contents of that. It contains a comment saying which database it’s a query on, together with the query.</p>
<pre lang="SQL">-- stylish.db
SELECT style, code, GROUP_CONCAT(section_meta.value) as 'website(s)' FROM
 (SELECT styles.name AS style,
 sections.code AS code,sections.id AS sections_id
 FROM styles INNER JOIN sections ON sections.style_id = styles.id)
LEFT JOIN section_meta
 ON section_meta.section_id = sections_id
GROUP BY style;</pre>
<p>The cool part here is that none of this was specific to stylish. I can quickly throw together a .view file for any database and put it on the web.<span id="more-243"></span></p>
<p>I add put any databases in cgi-bin/db, and add view.cgi to cgi-bin:</p>
<pre lang="bash">#!/bin/bash
# view.cgi
echo "Content-type: text/html"
echo

QUERY_FILE="${PATH_TRANSLATED}"
DB_NAME=$(head -n1 "${QUERY_FILE}" | sed -e 's/--\s*//')
DB="/home/za3k/cgi-bin/db/${DB_NAME}"

echo "&lt;html&gt;&lt;head&gt;&lt;title&gt;Query on #{DB_NAME}&lt;/title&gt;&lt;link rel="stylesheet" type="text/css" href="db.css"&gt;&lt;/head&gt;&lt;body&gt;&lt;table id=\"${DB_NAME}\"&gt;"
sqlite3 "$DB" -html -header &lt;"${QUERY_FILE}"
echo "&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;"</pre>
<table id='\"${DB_NAME}\"'></table>
<p>I add this to apache’s `.htaccess`:</p>
<pre lang="htaccess">Action view /cgi-bin/view.cgi
AddHandler view .view
</pre>
</div><!-- .entry-content -->
<div class="entry-utility">
<span class="bl_posted">Tagged <a href="https://blog.za3k.com/tag/cgi/" rel="tag">cgi</a>, <a href="https://blog.za3k.com/tag/sql/" rel="tag">sql</a>, <a href="https://blog.za3k.com/tag/sqlite/" rel="tag">sqlite</a>, <a href="https://blog.za3k.com/tag/website/" rel="tag">website</a>.</span><span class="bl_bookmark"> Bookmark the  <a href="https://blog.za3k.com/sql-views/" rel="bookmark" title="Permalink to SQL views"> permalink</a>.</span> </div><!-- .entry-utility -->
</article>

<!-- comments -->
