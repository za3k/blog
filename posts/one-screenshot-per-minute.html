---
author: admin
categories:
- Technical
date: 2022-07-10 09:28:46-07:00
markup: html
source: wordpress
tags:
- backup
- linux
title: One Screenshot Per Minute
updated: 2022-07-10 09:37:53-07:00
wordpress_id: 748
wordpress_slug: one-screenshot-per-minute
---
<!-- blogpost -->
<article class="post-748 post type-post status-publish format-standard hentry category-technical tag-backup tag-linux" id="post-748">
<h1 class="entry-title">One Screenshot Per Minute</h1>
<div class="entry-meta">
<span class="author vcard"> By  <a class="url fn n" href="https://blog.za3k.com/author/admin/" rel="author" title="View all posts by admin">admin</a> <span class="bl_sep">|</span></span> <time class="onDate date published" datetime="2022-07-10T09:28:46-07:00"> <a href="https://blog.za3k.com/one-screenshot-per-minute/" rel="bookmark" title="9:28 am"><span class="entry-date">July 10, 2022</span> <span class="entry-time"> - 9:28 am</span></a> </time><span class="bl_sep">|</span><time class="updated" datetime="2022-07-10T09:37:53-07:00">July 10, 2022</time> <span class="bl_categ"> <a href="https://blog.za3k.com/category/technical/" rel="tag">Technical</a> </span> </div><!-- .entry-meta -->
<div class="entry-content">
<p>One of my archiving and backup contingencies is taking one screenshot per minute. You can also use this to get a good idea of how you spend your day, by turning it into a movie. Although with a tiling window manager like I use, it’s a headache to watch.</p>
<p>I send the screenshots over to another machine for storage, so they’re not cluttering my laptop. It uses up 10-20GB per year.</p>
<p>I’ll go over my exact setup below in case anyone is interested in doing the same:</p>
<p><strong>/bin/screenlog</strong></p>
<pre class="" lang="bash">GPG_KEY=Zachary
TEMPLATE=/var/screenlog/%Y-%m-%d/%Y-%m-%d.%H:%M:%S.jpg
export DISPLAY=:0
export XAUTHORITY=/tmp/XAuthority

IMG=$(\date +$TEMPLATE)
mkdir -p $(dirname "$IMG")
scrot "$IMG"
gpg --encrypt -r "$GPG_KEY" "$IMG"
shred -zu "$IMG"</pre>
<p>The script</p>
<ul><li>Prints everything to stderr if you run it manually</li><li>Makes a per-day directory. We store everything in /var/screenlog/2022-07-10/ for the day</li><li>Takes a screenshot. By default, crontab doesn’t have X Windows (graphics) access. To allow it, the XAuthority file which allows access needs to be somewhere my crontab can reliably access. I picked <code>/tmp/XAuthority</code>. It doesn’t need any unusual permissions, but the default location has some random characters in it.</li><li><a href="https://www.gnupg.org/">GPG</a>-encrypts the screenshot with a public key and deletes the original. This is extra protection in case my backups somehow get shared, so I don’t literally leak all my habits, passwords, etc. I just use my standard key so I don’t lose it. It’s <a href="https://en.wikipedia.org/wiki/Public-key_cryptography">public-key crypto</a>, so put the public key on your laptop. Put the private key on neither, one, or both, depending on which you want to be able to read the photos.</li></ul>
<p><strong>/etc/cron.d/screenlog</strong></p>
<pre class="" lang="cron">* * * * * zachary  /bin/screenlog
20  * * * * zachary  rsync --remove-source-files -r /var/screenlog/ backup-machine:/data/screenlog/laptop
30  * * * * zachary  rmdir /var/screenlog/*</pre>
<p>That’s</p>
<ul><li>Take a screenshot once every minute. Change the first * to */5 for every 5 minutes, and so on.</li><li>Copy over the gpg-encrypted screenshots hourly, deleting the local copy</li><li>Also hourly, delete empty per-day folders after the contents are copied, so they don’t clutter things</li></ul>
<p><strong>~/.profile</strong></p>
<pre class="" lang="bash">export XAUTHORITY=/tmp/XAuthority</pre>
<p>I mentioned /bin/screenlog needs to know where XAuthority is. In Arch Linux this is all I need to do.</p>
</div><!-- .entry-content -->
<div class="entry-utility">
<span class="bl_posted">Tagged <a href="https://blog.za3k.com/tag/backup/" rel="tag">backup</a>, <a href="https://blog.za3k.com/tag/linux/" rel="tag">linux</a>.</span><span class="bl_bookmark"> Bookmark the  <a href="https://blog.za3k.com/one-screenshot-per-minute/" rel="bookmark" title="Permalink to One Screenshot Per Minute"> permalink</a>.</span> </div><!-- .entry-utility -->
</article>

<!-- comments -->
