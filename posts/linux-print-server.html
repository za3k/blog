---
author: admin
categories:
- Technical
date: 2015-10-11 11:39:05-07:00
markup: html
source: wordpress
tags:
- linux
- printer
- system administration
title: Linux Print Server
updated: 2015-10-17 19:19:19-07:00
wordpress_id: 293
wordpress_slug: linux-print-server
---
<!-- blogpost -->
<article class="post-293 post type-post status-publish format-standard hentry category-technical tag-linux tag-printer tag-system-administration" id="post-293">
<h1 class="entry-title">Linux Print Server</h1>
<div class="entry-meta">
<span class="author vcard"> By  <a class="url fn n" href="https://blog.za3k.com/author/admin/" rel="author" title="View all posts by admin">admin</a> <span class="bl_sep">|</span></span> <time class="onDate date published" datetime="2015-10-11T11:39:05-07:00"> <a href="https://blog.za3k.com/linux-print-server/" rel="bookmark" title="11:39 am"><span class="entry-date">October 11, 2015</span> <span class="entry-time"> - 11:39 am</span></a> </time><span class="bl_sep">|</span><time class="updated" datetime="2015-10-17T19:19:19-07:00">October 17, 2015</time> <span class="bl_categ"> <a href="https://blog.za3k.com/category/technical/" rel="tag">Technical</a> </span> </div><!-- .entry-meta -->
<div class="entry-content">
<p>So have you ever used a web printer and it was great?</p>
<p>…</p>
<p>Yeah, me neither. <span id="more-293"></span>It’s probably possible on windows, but try to add more than one OS to the network and it’s horrible. And actually printing is a major pain in Linux anyway. Theoretically ‘lp’ and the like have no problem with remote printers, but I wanted something I understood. So today I’m going to post my setup I use instead.</p>
<p>I have a computer physically connected to the printer. Let’s call it ‘printserver’. On that server there is a folder, /printme, which is constantly monitored by inode. Any file added to that directory is printed.</p>
<p>Suppose I downloaded cutecats.pdf and I want to print it. Then I run:</p>
<pre lang="bash">scp cutecats.pdf printserver:/printme
</pre>
<p>And voila, the cute cats get printed.</p>
<hr/>
<p>Here’s the setup for the server:</p>
<ol>
<li>Get the printer to work. This is the hard step.</li>
<li>Make a directory /printme. Add any missing users, add a new group called ‘print’ and add everyone who needs to print to that, etc.</li>
<li>Set up /printme to be a tmpfs with the sticky bit set. (So we don’t fill up the hard drive)
<pre lang="sh">/etc/fstab
tmpfs           /printme        tmpfs   rw,nodev,nosuid,noexec,uid=nobody,gid=print,mode=1770,size=1G  0       0</pre>
</li>
<li>Install incron and add this to the incrontab (of user ‘print’ or ‘sudo’):
<pre lang="bash"># incrontab -l
/printme IN_CLOSE_WRITE,IN_MOVED_TO lp $@/$#</pre>
<p>Note that this will preserve files after they’re printed, because my server is low-volume enough I don’t need to care.</p></li>
</ol>
</div><!-- .entry-content -->
<div class="entry-utility">
<span class="bl_posted">Tagged <a href="https://blog.za3k.com/tag/linux/" rel="tag">linux</a>, <a href="https://blog.za3k.com/tag/printer/" rel="tag">printer</a>, <a href="https://blog.za3k.com/tag/system-administration/" rel="tag">system administration</a>.</span><span class="bl_bookmark"> Bookmark the  <a href="https://blog.za3k.com/linux-print-server/" rel="bookmark" title="Permalink to Linux Print Server"> permalink</a>.</span> </div><!-- .entry-utility -->
</article>

<!-- comments -->
