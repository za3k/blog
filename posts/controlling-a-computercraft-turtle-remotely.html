---
author: admin
categories:
- Technical
date: 2015-10-18 18:27:48-07:00
markup: html
source: wordpress
tags:
- computercraft
- hacks
- minecraft
title: Controlling a computercraft turtle remotely
updated: 2015-11-29 23:04:07-07:00
wordpress_id: 313
wordpress_slug: controlling-a-computercraft-turtle-remotely
---
<!-- blogpost -->
<article class="post-313 post type-post status-publish format-standard has-post-thumbnail hentry category-technical tag-computercraft tag-hacks tag-minecraft-2" id="post-313">
<h1 class="entry-title">Controlling a computercraft turtle remotely</h1>
<div class="entry-meta">
<span class="author vcard"> By  <a class="url fn n" href="https://blog.za3k.com/author/admin/" rel="author" title="View all posts by admin">admin</a> <span class="bl_sep">|</span></span> <time class="onDate date published" datetime="2015-10-18T18:27:48-07:00"> <a href="https://blog.za3k.com/controlling-a-computercraft-turtle-remotely/" rel="bookmark" title="6:27 pm"><span class="entry-date">October 18, 2015</span> <span class="entry-time"> - 6:27 pm</span></a> </time><span class="bl_sep">|</span><time class="updated" datetime="2015-11-29T23:04:07-07:00">November 29, 2015</time> <span class="bl_categ"> <a href="https://blog.za3k.com/category/technical/" rel="tag">Technical</a> </span> </div><!-- .entry-meta -->
<div class="entry-content">
<p><a href="https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM.png"><img alt="Screen Shot 2015-10-18 at 7.16.59 PM" class="alignnone wp-image-321 size-large" decoding="async" fetchpriority="high" height="460" sizes="(max-width: 810px) 100vw, 810px" src="https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM-1024x582.png" srcset="https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM-1024x582.png 1024w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM-300x170.png 300w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM-250x142.png 250w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM-150x85.png 150w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.16.59-PM.png 1592w" width="810"/></a><a href="https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM.png"><img alt="Screen Shot 2015-10-18 at 7.17.30 PM" class="aligncenter wp-image-323 size-medium" decoding="async" height="197" sizes="(max-width: 300px) 100vw, 300px" src="https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM-300x197.png" srcset="https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM-300x197.png 300w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM-1024x675.png 1024w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM-227x150.png 227w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM-150x98.png 150w, https://blog.za3k.com/wp-content/uploads/2015/10/Screen-Shot-2015-10-18-at-7.17.30-PM.png 1330w" width="300"/></a><span id="more-313"></span></p>
<ol>
<li>Install Redis: <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-redis">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-redis</a></li>
<li>Install <a href="https://github.com/nicolasff/webdis">Webdis<br/>
</a></li>
<li>Start a minecraft server with computercraft. You will need to have the http API enabled, which is the default.</li>
<li>Put down a turtle I recommend a turtle with a crafting square and a pickaxe. I also recommend giving it a label. If you’re not trying the <a href="http://www.computercraft.info/forums2/index.php?/topic/4462-competition/">turtle replication challenge</a>, either disable fuel or get a fair bit of starting fuel. Write down the computer’s id.</li>
<li>Put down a chunk loader, if you’re in a modpack that has them, or DON’T log out. Computers and turtles can’t operate unless the chunks are loaded. If you’re putting down a chunkloader, I surrounded them with bedrock for foolproofing.</li>
<li>Open the turtle and download the following script, changing “redis.example.com” to your own redis instance: pastebin get 8FjggG9w startup<br/>
After you have the script saved as ‘startup’, run it or reboot the computer, and it should start listening for instructions.
<pre class="" lang="lua">redis = "http://redis.example.com" 
queue = "sshbot" .. os.getComputerID()
return_queue = queue .. "_return"
print("Remote webdis queues on icyego: " .. queue .. " and " .. return_queue)
print("Receiving remote commands.")

function exec(str)
  print("Running: " .. str)
  f = fs.open("tmp", "w")
  f.write(str)
  f.close()
  p = loadfile("tmp")
 status, err = pcall(function () p = loadfile("tmp"); return p() end)
  if status then
    status, ret = pcall(function() return textutils.serialize(err) end)
    if status then
      result = ret
    else
      result = ""
    end
  else
    result = "Error: " .. err
  end
  print(result)
  return result
end

print("Now receiving remote commands.")
while true do
  handle = http.get(redis .. "/BRPOP/" .. queue .. "/5.txt")
  if (handle and handle.getResponseCode() == 200) then 
    str = handle.readAll()
    handle.close()
    str = string.sub(str, string.len(queue) + 1)
    result = exec(str)
    if string.find(result, "Error: ") then
      result2 = exec("return " .. str)
      if string.find(result2, "Error: ") then a=0 else result=result2 end
    end
    http.post(redis, "LPUSH/" .. return_queue .. "/" .. result)
  end
end
</pre>
</li>
<li>On your local machine, save the following, again replacing “redis.example.com”:
<pre lang="bash">#!/bin/bash
function send() {
  curl -s -X POST -d "LPUSH/sshbot${1}/${2}" "http://redis.example.com" &gt;/dev/null

}

function get() {
  curl -s -X GET "http://redis.example.com/BRPOP/sshbot${1}_return/20.json" | jq .BRPOP[1]
}

if [ $# -ne 1 ]; then
  echo "Usage: rlwrap ./sshbot &lt;COMPUTER_ID&gt;"
  exit 1
fi
ID=$1

while read LINE; do
  send ${ID} "$LINE"
  get ${ID}
done</pre>
</li>
<li>Run: rlwrap ./sshbot &lt;ID&gt;, where &lt;ID&gt; is the turtle’s ID. You should be able to send commands to the computer now.</li>
</ol>
</div><!-- .entry-content -->
<div class="entry-utility">
<span class="bl_posted">Tagged <a href="https://blog.za3k.com/tag/computercraft/" rel="tag">computercraft</a>, <a href="https://blog.za3k.com/tag/hacks/" rel="tag">hacks</a>, <a href="https://blog.za3k.com/tag/minecraft-2/" rel="tag">minecraft</a>.</span><span class="bl_bookmark"> Bookmark the  <a href="https://blog.za3k.com/controlling-a-computercraft-turtle-remotely/" rel="bookmark" title="Permalink to Controlling a computercraft turtle remotely"> permalink</a>.</span> </div><!-- .entry-utility -->
</article>

<!-- comments -->
<ol class="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-3128">
<div id="comment-3128">
<div class="comment-author vcard">
<img alt="" class="avatar avatar-40 photo" decoding="async" height="40" src="https://secure.gravatar.com/avatar/b7fcc830b8a111f098fb64bdd96eedf2?s=40&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b7fcc830b8a111f098fb64bdd96eedf2?s=80&amp;d=mm&amp;r=g 2x" width="40"/><cite class="fn"><a class="url" href="https://comparegamehosting.com/game/minecraft/" rel="ugc external nofollow">Alex Booth</a></cite> <span class="says">says:</span>
</div><!-- .comment-author .vcard -->
<div class="comment-meta commentmetadata"><a href="https://blog.za3k.com/controlling-a-computercraft-turtle-remotely/#comment-3128">
			April 25, 2018 at 9:27 am</a> </div><!-- .comment-meta .commentmetadata -->
<div class="comment-body">
<p>Opening up ComputerCraft to the world using the http commands was an amazing idea from the developers!</p>
</div>
<div class="reply">
<a aria-label="Reply to Alex Booth" class="comment-reply-link" data-belowelement="comment-3128" data-commentid="3128" data-postid="313" data-replyto="Reply to Alex Booth" data-respondelement="respond" href="https://blog.za3k.com/controlling-a-computercraft-turtle-remotely/?replytocom=3128#respond" rel="nofollow">Reply</a> </div><!-- .reply -->
</div><!-- #comment-##  -->
</li><!-- #comment-## -->
</ol>